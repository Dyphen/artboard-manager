<style media="screen">
  * {
    font: 400 13px/1.5 system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, sans-serif;
  }
  html {
    position: fixed;
    height  : 100%;
    overflow: hidden;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
  }
  body {
    width: 100vw;
    height: 100vh;
    overflow-y: scroll;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }
  fieldset {
    border: none;
  }
  label.right,
  input.right {
    width: 200px;
    display: inline-block;
    text-align: right;
  }
</style>
<script type="text/javascript">
  // Populate form values
  // import pluginCall from 'sketch-module-web-view/client'
  function pluginCall(actionName) {
    if (!actionName) {
      throw new Error('missing action name')
    }
    var args = [].slice.call(arguments).slice(1)
    var previousHash = (window.location.hash.split('?')[1] ? window.location.hash.split('?')[0] : window.location.hash)
    window.location.hash = previousHash +
    '?pluginAction=' + encodeURIComponent(actionName) +
    '&actionId=' + Date.now() +
    '&pluginArgs=' + encodeURIComponent(JSON.stringify(args))
    return
  }

  function serializeForm(){
    pluginCall('storePreferences', {
      renameArtboards: document.getElementById("renameArtboards").checked,
      snapDistance: document.getElementById("snapDistance").value,
      gridHorizontalSpace: document.getElementById("gridHorizontalSpace").value,
      gridVerticalSpace: document.getElementById("gridVerticalSpace").value
    })
  }
  function populateFormValues(defaults){
    document.getElementById("renameArtboards").checked = defaults.renameArtboards
    document.getElementById("snapDistance").value = defaults.snapDistance
    document.getElementById("gridHorizontalSpace").value = defaults.gridHorizontalSpace
    document.getElementById("gridVerticalSpace").value = defaults.gridVerticalSpace

    document.getElementById("renameArtboards").addEventListener('click', serializeForm)
    document.getElementById("snapDistance").addEventListener('change', serializeForm)
    document.getElementById("gridHorizontalSpace").addEventListener('change', serializeForm)
    document.getElementById("gridVerticalSpace").addEventListener('change', serializeForm)
    // document.getElementById("saveButton").addEventListener('click', serializeForm)
  }
  // On change form, store new defaults
  // TODO: Add basenames
</script>
<form id="form">
  <fieldset>
    <input class="right" type="checkbox" id="renameArtboards" />
    <label for="renameArtboards">Rename Artboards</label>
  </fieldset>
  <fieldset>
    <label class="right" for="snapDistance">snapDistance</label>
    <input type="text" id="snapDistance" value="0" />
  </fieldset>
  <fieldset>
    <label class="right" for="gridHorizontalSpace">gridHorizontalSpace</label>
    <input type="text" id="gridHorizontalSpace" value="0" />
  </fieldset>
  <fieldset>
    <label class="right" for="gridVerticalSpace">gridVerticalSpace</label>
    <input type="text" id="gridVerticalSpace" value="0" />
  </fieldset>
  <!-- <fieldset>
    <button type="button" id="saveButton">Save Settings</button>
  </fieldset> -->
</form>
